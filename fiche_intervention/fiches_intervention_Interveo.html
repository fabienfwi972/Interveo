<!DOCTYPE html>

<html lang="fr">
<head><link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&amp;display=swap" rel="stylesheet"/>
<meta charset="utf-8"/>
<title>Fiche d'Intervention - Interv√©o</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&amp;display=swap" rel="stylesheet"/>
<style>
    body { font-family: 'Montserrat', sans-serif; padding: 20px; background-color: #f5f9ff; }
    h1 { color: #eeb414; }
    .task { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; border-radius: 8px; background-color: #fff; }
    .task-header { display: flex; justify-content: space-between; align-items: center; }
    .controls { display: flex; gap: 10px; margin-top: 10px; }
    button {
      padding: 8px 16px;
      background-color: #ffbe0a;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    button:hover {
      background-color: #f3c42b;
    }
    button.compact {
      padding: 4px 10px;
      font-size: 1rem;
      width: 32px;
      height: 32px;
    }
    button.qty {
      padding: 2px 8px;
      font-size: 1.2rem;
      width: 28px;
      height: 28px;
      background-color: #f3c96e;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      line-height: 1;
    }
    .quantity { display: inline-flex; align-items: center; gap: 5px; }
  
.section {
  background: #f9fcff;
  border: 1px solid #dbe8f4;
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 30px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

body {
  background-color: #f3f3f3;
  font-family: 'Montserrat', sans-serif;
}

header {
  background-color: #ffffff;
  padding: 10px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 4px solid #F5A623;
}

header img {
  height: 50px;
}

header h1 {
  color: #fabd16;
  font-size: 1.8rem;
  margin: 0;
}

.section {
  background: #ffffff;
  border-left: 6px solid #F5A623;
  padding: 20px;
  border-radius: 10px;
  margin: 20px 0;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

button {
  padding: 10px 16px;
  background-color: #F5A623;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
  cursor: pointer;
  margin: 5px 0;
}

button:hover {
  background-color: #e68c00;
}

.qty {
  padding: 4px 10px;
  font-size: 1.1rem;
  width: 32px;
  height: 32px;
  background-color: #F5A623;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

body {
  background-color: #121212;
  color: #f0f0f0;
}

header {
  background-color: #1e1e1e;
  border-bottom: 4px solid #F5A623;
}

.section {
  background: #1e1e1e;
  border-left: 6px solid #F5A623;
  box-shadow: none;
}

input[type="text"], select {
  background-color: #3f3f3f;
  color: #ffffff;
  border: 1px solid #F5A623;
}

button {
  background-color: #F5A623;
  color: white;
}

button:hover {
  background-color: #e68c00;
}

.task {
  background-color: #1e1e1e;
  border: 1px solid #333;
}

h1, h2, h3, label {
  color: #ffffff;
}

body {
  background-color: #121212;
}

.section {
  background: #ffffff;
  border-left: 6px solid #F5A623;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  color: #000000;
}

.task {
  background-color: #ffffff;
  border: 1px solid #ccc;
  color: #000000;
}

input[type="text"], select {
  background-color: #ffffff;
  color: #000000;
  border: 1px solid #F5A623;
}

h1, h2, h3, label {
  color: #ffffff;
}

body {
  background-color: #3f3f3f;
  color: #f0f0f0;
}

header {
  background-color: #e6f0fa;
  border-bottom: 4px solid #F5A623;
}

.section {
  background: #8c8c8c;
  border-left: 6px solid #F5A623;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  color: #000000;
}

.task {
  background-color: #e4e4e4;
  border: 1px solid #ccc;
  color: #000000;
}

input[type="text"], select {
  background-color: #ffffff;
  color: #000000;
  border: 1px solid #F5A623;
}

h1, h2, h3, label {
  color: #000000;
}

header h1 {
  color: #F5A623;
  font-size: 2.2rem;
  text-align: center;
  flex: 1;
  font-weight: 600;
}

header h1 {
  color: #ffffff;
  font-size: 2.5rem;
}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script><style>
@media print {
  body {
    background: white !important;
    margin: 0 !important;
    -webkit-print-color-adjust: exact;
  }

  .task, .section, .pdf-wrapper {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  .pdf-wrapper {
    width: 100%;
    max-width: 700px;
    margin: auto;
    padding: 20px;
    background: white;
  }

  button, .no-print {
    display: none !important;
  }

  .logo img {
    max-width: 200px !important;
    height: auto !important;
  }

  h1, h2 {
    font-size: 20px !important;
  }
}
</style></head>
<body><div class="pdf-wrapper"><img src="Interveo_Logo_EnTete.png" style="width: 100%; max-width: 100%; display: block; margin-bottom: 10px;"/><header style="background-color: transparent; padding: 20px 0; display: flex; justify-content: center; align-items: center;"><div style="font-size: 2.5rem; font-weight: 600; color: #ffffff;">Fiche d‚Äôintervention Interv√©o</div></header>
<div class="section"><h2>üìÜ Date de l‚Äôintervention</h2><p id="intervention-date" style="font-size: 1.2rem; font-weight: bold; margin-top: 10px;"></p></div><div class="section"><label for="nomPose"><strong>Pose :</strong></label><input id="nomPose" placeholder="Ex : Mme DUPONT - Cuisine" style="
  width: 100%;
  padding: 10px;
  margin-bottom: 20px;
  font-size: 1rem;
  border: 1px solid #ccc;
  border-radius: 6px;
" type="text"/><br/></div><div style="margin-bottom: 20px; background: #e1e1e1; padding: 10px; border-radius: 6px;"><label style="display: block; font-weight: bold; margin-bottom: 5px;">üë§ Nom du poseur :</label><input name="poseur" id="poseur-name" style="padding: 6px; border-radius: 4px; width: 100%; border: 1px solid #ccc;" type="text"/></div>
<br/>
<div id="global-timer-container" style="margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
<strong>‚è±Ô∏è Temps total d'intervention :</strong>
<span id="global-timer">0m 0s</span>
<button id="global-btn" onclick="toggleGlobalTimer()">D√©marrer</button>
<button onclick="resetGlobalTimer()">R√©initialiser</button>
</div>
<div class="section"><h2>Liste des T√¢ches</h2><div id="tasks-container">
<!-- Bloc dynamique g√©n√©r√© -->
<!-- Voici un exemple sur les premi√®res t√¢ches : -->
<div class="task">
<div class="task-header">
<strong>MOC_01 - Mise en place</strong>
<div id="timer-0">0m 0s</div>
</div>
<div class="controls">
<button id="btn-0" onclick="startTimer('0')">D√©marrer</button>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>MOC_02 - Pose √† blanc Recherche Solution technique</strong>
<div id="timer-1">0m 0s</div>
</div>
<div class="controls">
<button id="btn-1" onclick="startTimer('1')">D√©marrer</button>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>MOC_03 - Pause</strong>
<div id="timer-2">0m 0s</div>
</div>
<div class="controls">
<button id="btn-2" onclick="startTimer('2')">D√©marrer</button>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>MOC_04 - Nettoyage et fin de chantier</strong>
<div id="timer-3">0m 0s</div>
</div>
<div class="controls">
<button id="btn-3" onclick="startTimer('3')">D√©marrer</button>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400001 - Pose de Meuble Bas</strong>
<div id="timer-4">0m 0s</div>
</div>
<div class="controls">
<button id="btn-4" onclick="startTimer('4')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('4', -1)">‚Äì</button>
<span id="qty-4">0</span><span>U</span>
<button class="qty" onclick="changeQty('4', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400002 - Pose Meuble Haut</strong>
<div id="timer-5">0m 0s</div>
</div>
<div class="controls">
<button id="btn-5" onclick="startTimer('5')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('5', -1)">‚Äì</button>
<span id="qty-5">0</span><span>U</span>
<button class="qty" onclick="changeQty('5', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400003 - Pose Meuble Colonne</strong>
<div id="timer-6">0m 0s</div>
</div>
<div class="controls">
<button id="btn-6" onclick="startTimer('6')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('6', -1)">‚Äì</button>
<span id="qty-6">0</span><span>U</span>
<button class="qty" onclick="changeQty('6', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400004 - Pose de Socle</strong>
<div id="timer-7">0m 0s</div>
</div>
<div class="controls">
<button id="btn-7" onclick="startTimer('7')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('7', -1)">‚Äì</button>
<span id="qty-7">0</span><span>U</span>
<button class="qty" onclick="changeQty('7', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400005 - Pose de Fileur</strong>
<div id="timer-8">0m 0s</div>
</div>
<div class="controls">
<button id="btn-8" onclick="startTimer('8')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('8', -1)">‚Äì</button>
<span id="qty-8">0</span><span>U</span>
<button class="qty" onclick="changeQty('8', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400006 - Pose de Joue</strong>
<div id="timer-9">0m 0s</div>
</div>
<div class="controls">
<button id="btn-9" onclick="startTimer('9')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('9', -1)">‚Äì</button>
<span id="qty-9">0</span><span>U</span>
<button class="qty" onclick="changeQty('9', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400007 - Pose de Fileur Haut</strong>
<div id="timer-10">0m 0s</div>
</div>
<div class="controls">
<button id="btn-10" onclick="startTimer('10')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('10', -1)">‚Äì</button>
<span id="qty-10">0</span><span>U</span>
<button class="qty" onclick="changeQty('10', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400008 - Pose Etag√®re</strong>
<div id="timer-11">0m 0s</div>
</div>
<div class="controls">
<button id="btn-11" onclick="startTimer('11')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('11', -1)">‚Äì</button>
<span id="qty-11">0</span><span>U</span>
<button class="qty" onclick="changeQty('11', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400009 - Pose Miroir</strong>
<div id="timer-12">0m 0s</div>
</div>
<div class="controls">
<button id="btn-12" onclick="startTimer('12')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('12', -1)">‚Äì</button>
<span id="qty-12">0</span><span>U</span>
<button class="qty" onclick="changeQty('12', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400010 - Montage Table</strong>
<div id="timer-13">0m 0s</div>
</div>
<div class="controls">
<button id="btn-13" onclick="startTimer('13')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('13', -1)">‚Äì</button>
<span id="qty-13">0</span><span>U</span>
<button class="qty" onclick="changeQty('13', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400011 - Enl√®vement des D√©chets</strong>
<div id="timer-14">0m 0s</div>
</div>
<div class="controls">
<button id="btn-14" onclick="startTimer('14')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('14', -1)">‚Äì</button>
<span id="qty-14">0</span><span>U</span>
<button class="qty" onclick="changeQty('14', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400012 - Pose plaque Anti-chaleur</strong>
<div id="timer-15">0m 0s</div>
</div>
<div class="controls">
<button id="btn-15" onclick="startTimer('15')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('15', -1)">‚Äì</button>
<span id="qty-15">0</span><span>U</span>
<button class="qty" onclick="changeQty('15', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400013 - Pose Kipps</strong>
<div id="timer-16">0m 0s</div>
</div>
<div class="controls">
<button id="btn-16" onclick="startTimer('16')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('16', -1)">‚Äì</button>
<span id="qty-16">0</span><span>U</span>
<button class="qty" onclick="changeQty('16', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400014 - Pose Pied de Table</strong>
<div id="timer-17">0m 0s</div>
</div>
<div class="controls">
<button id="btn-17" onclick="startTimer('17')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('17', -1)">‚Äì</button>
<span id="qty-17">0</span><span>U</span>
<button class="qty" onclick="changeQty('17', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400015 - Pose d'√©querre</strong>
<div id="timer-18">0m 0s</div>
</div>
<div class="controls">
<button id="btn-18" onclick="startTimer('18')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('18', -1)">‚Äì</button>
<span id="qty-18">0</span><span>U</span>
<button class="qty" onclick="changeQty('18', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400016 - Pose de Gorge</strong>
<div id="timer-19">0m 0s</div>
</div>
<div class="controls">
<button id="btn-19" onclick="startTimer('19')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('19', -1)">‚Äì</button>
<span id="qty-19">0</span><span>U</span>
<button class="qty" onclick="changeQty('19', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400017 - Pose Systeme Ouverture Range Couvert</strong>
<div id="timer-20">0m 0s</div>
</div>
<div class="controls">
<button id="btn-20" onclick="startTimer('20')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('20', -1)">‚Äì</button>
<span id="qty-20">0</span><span>U</span>
<button class="qty" onclick="changeQty('20', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400018 - Pose Prise dans Cr√©dence</strong>
<div id="timer-21">0m 0s</div>
</div>
<div class="controls">
<button id="btn-21" onclick="startTimer('21')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('21', -1)">‚Äì</button>
<span id="qty-21">0</span><span>U</span>
<button class="qty" onclick="changeQty('21', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400019 - Pose de Spot</strong>
<div id="timer-22">0m 0s</div>
</div>
<div class="controls">
<button id="btn-22" onclick="startTimer('22')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('22', -1)">‚Äì</button>
<span id="qty-22">0</span><span>U</span>
<button class="qty" onclick="changeQty('22', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400020 - Pose de Gorge √âclair</strong>
<div id="timer-23">0m 0s</div>
</div>
<div class="controls">
<button id="btn-23" onclick="startTimer('23')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('23', -1)">‚Äì</button>
<span id="qty-23">0</span><span>U</span>
<button class="qty" onclick="changeQty('23', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400021 - Pose Bloque Prise Plan</strong>
<div id="timer-24">0m 0s</div>
</div>
<div class="controls">
<button id="btn-24" onclick="startTimer('24')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('24', -1)">‚Äì</button>
<span id="qty-24">0</span><span>U</span>
<button class="qty" onclick="changeQty('24', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400022 - Pose Four</strong>
<div id="timer-25">0m 0s</div>
</div>
<div class="controls">
<button id="btn-25" onclick="startTimer('25')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('25', -1)">‚Äì</button>
<span id="qty-25">0</span><span>U</span>
<button class="qty" onclick="changeQty('25', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400023 - Pose Micro-Onde</strong>
<div id="timer-26">0m 0s</div>
</div>
<div class="controls">
<button id="btn-26" onclick="startTimer('26')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('26', -1)">‚Äì</button>
<span id="qty-26">0</span><span>U</span>
<button class="qty" onclick="changeQty('26', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400024 - Pose Plaque Elec/Gaz</strong>
<div id="timer-27">0m 0s</div>
</div>
<div class="controls">
<button id="btn-27" onclick="startTimer('27')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('27', -1)">‚Äì</button>
<span id="qty-27">0</span><span>U</span>
<button class="qty" onclick="changeQty('27', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400025 - Pose Hotte Murale</strong>
<div id="timer-28">0m 0s</div>
</div>
<div class="controls">
<button id="btn-28" onclick="startTimer('28')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('28', -1)">‚Äì</button>
<span id="qty-28">0</span><span>U</span>
<button class="qty" onclick="changeQty('28', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400026 - Pose de Lave-Vaisselle Int√©grable</strong>
<div id="timer-29">0m 0s</div>
</div>
<div class="controls">
<button id="btn-29" onclick="startTimer('29')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('29', -1)">‚Äì</button>
<span id="qty-29">0</span><span>U</span>
<button class="qty" onclick="changeQty('29', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400027 - Pose de R√©frig√©rateur Int√©grable</strong>
<div id="timer-30">0m 0s</div>
</div>
<div class="controls">
<button id="btn-30" onclick="startTimer('30')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('30', -1)">‚Äì</button>
<span id="qty-30">0</span><span>U</span>
<button class="qty" onclick="changeQty('30', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400028 - Pose de Frigo Pose Libre</strong>
<div id="timer-31">0m 0s</div>
</div>
<div class="controls">
<button id="btn-31" onclick="startTimer('31')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('31', -1)">‚Äì</button>
<span id="qty-31">0</span><span>U</span>
<button class="qty" onclick="changeQty('31', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400029 - Pose de Hotte sur Plan de Travail</strong>
<div id="timer-32">0m 0s</div>
</div>
<div class="controls">
<button id="btn-32" onclick="startTimer('32')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('32', -1)">‚Äì</button>
<span id="qty-32">0</span><span>U</span>
<button class="qty" onclick="changeQty('32', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400030 - Pose de Hotte dans Plafond Encastrer</strong>
<div id="timer-33">0m 0s</div>
</div>
<div class="controls">
<button id="btn-33" onclick="startTimer('33')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('33', -1)">‚Äì</button>
<span id="qty-33">0</span><span>U</span>
<button class="qty" onclick="changeQty('33', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400031 - Pose de Hotte Suspendu</strong>
<div id="timer-34">0m 0s</div>
</div>
<div class="controls">
<button id="btn-34" onclick="startTimer('34')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('34', -1)">‚Äì</button>
<span id="qty-34">0</span><span>U</span>
<button class="qty" onclick="changeQty('34', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400032 - Pose de Lave Vaisselle Pose Libre</strong>
<div id="timer-35">0m 0s</div>
</div>
<div class="controls">
<button id="btn-35" onclick="startTimer('35')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('35', -1)">‚Äì</button>
<span id="qty-35">0</span><span>U</span>
<button class="qty" onclick="changeQty('35', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400033 - Pose de Plaque et Hotte Int√©grable</strong>
<div id="timer-36">0m 0s</div>
</div>
<div class="controls">
<button id="btn-36" onclick="startTimer('36')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('36', -1)">‚Äì</button>
<span id="qty-36">0</span><span>U</span>
<button class="qty" onclick="changeQty('36', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400034 - Pose de Plan de Travail</strong>
<div id="timer-37">0m 0s</div>
</div>
<div class="controls">
<button id="btn-37" onclick="startTimer('37')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('37', -1)">‚Äì</button>
<span id="qty-37">0</span><span>mL</span>
<button class="qty" onclick="changeQty('37', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400035 - Pose de Cr√©dence</strong>
<div id="timer-38">0m 0s</div>
</div>
<div class="controls">
<button id="btn-38" onclick="startTimer('38')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('38', -1)">‚Äì</button>
<span id="qty-38">0</span><span>mL</span>
<button class="qty" onclick="changeQty('38', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400036 - Pose Cave √† Vin</strong>
<div id="timer-39">0m 0s</div>
</div>
<div class="controls">
<button id="btn-39" onclick="startTimer('39')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('39', -1)">‚Äì</button>
<span id="qty-39">0</span><span>U</span>
<button class="qty" onclick="changeQty('39', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400037 - Pose de Machine √† Caf√© Int√©grable</strong>
<div id="timer-40">0m 0s</div>
</div>
<div class="controls">
<button id="btn-40" onclick="startTimer('40')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('40', -1)">‚Äì</button>
<span id="qty-40">0</span><span>U</span>
<button class="qty" onclick="changeQty('40', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400038 - Pose de Lave-Linge Int√©grable</strong>
<div id="timer-41">0m 0s</div>
</div>
<div class="controls">
<button id="btn-41" onclick="startTimer('41')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('41', -1)">‚Äì</button>
<span id="qty-41">0</span><span>U</span>
<button class="qty" onclick="changeQty('41', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400039 - Pose de Lave-Linge Pose Libre</strong>
<div id="timer-42">0m 0s</div>
</div>
<div class="controls">
<button id="btn-42" onclick="startTimer('42')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('42', -1)">‚Äì</button>
<span id="qty-42">0</span><span>U</span>
<button class="qty" onclick="changeQty('42', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400040 - Pose de S√®che-Linge Pose Libre</strong>
<div id="timer-43">0m 0s</div>
</div>
<div class="controls">
<button id="btn-43" onclick="startTimer('43')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('43', -1)">‚Äì</button>
<span id="qty-43">0</span><span>U</span>
<button class="qty" onclick="changeQty('43', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400041 - Pose de Frigo US</strong>
<div id="timer-44">0m 0s</div>
</div>
<div class="controls">
<button id="btn-44" onclick="startTimer('44')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('44', -1)">‚Äì</button>
<span id="qty-44">0</span><span>U</span>
<button class="qty" onclick="changeQty('44', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400042 - Pose de Piano</strong>
<div id="timer-45">0m 0s</div>
</div>
<div class="controls">
<button id="btn-45" onclick="startTimer('45')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('45', -1)">‚Äì</button>
<span id="qty-45">0</span><span>U</span>
<button class="qty" onclick="changeQty('45', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400043 - Pose et Raccordement d'√âvier et Mitigeur</strong>
<div id="timer-46">0m 0s</div>
</div>
<div class="controls">
<button id="btn-46" onclick="startTimer('46')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('46', -1)">‚Äì</button>
<span id="qty-46">0</span><span>U</span>
<button class="qty" onclick="changeQty('46', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400044 - Pose de Caisson de Dressing</strong>
<div id="timer-47">0m 0s</div>
</div>
<div class="controls">
<button id="btn-47" onclick="startTimer('47')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('47', -1)">‚Äì</button>
<span id="qty-47">0</span><span>mL</span>
<button class="qty" onclick="changeQty('47', 1)">+</button>
</div>
</div>
</div>
<div class="task">
<div class="task-header">
<strong>340400045 - Pose Pied de Table Rectangulaire</strong>
<div id="timer-48">0m 0s</div>
</div>
<div class="controls">
<button id="btn-48" onclick="startTimer('48')">D√©marrer</button>
<div class="quantity">
<button class="qty" onclick="changeQty('48', -1)">‚Äì</button>
<span id="qty-48">0</span><span>U</span>
<button class="qty" onclick="changeQty('48', 1)">+</button>
</div>
</div>
</div>
</div><button onclick="addManualTask()" style="
  margin: 12px 0;
  padding: 8px 16px;
  background-color: #ff6c0a;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
  cursor: pointer;
">
  ‚ûï Ajouter une t√¢che manuelle
</button><br/></div>
<div class="section"><h2>Consommables utilis√©s</h2><div id="consommables-container">
<div class="task" id="consommable-fixed-1">
<div class="task-header">
<strong>Silicone Sanitaire Translucide</strong>
</div>
<div class="controls">
<div class="quantity">
<button class="qty" onclick="changeQty('fixed1', -1)">‚Äì</button>
<span id="qty-fixed1">0</span>
<button class="qty" onclick="changeQty('fixed1', 1)">+</button>
<span style="margin-left: 8px;">U</span>
</div>
</div>
</div>
<div class="task" id="consommable-fixed-2">
<div class="task-header">
<strong>Silicone Sanitaire Blanc</strong>
</div>
<div class="controls">
<div class="quantity">
<button class="qty" onclick="changeQty('fixed2', -1)">‚Äì</button>
<span id="qty-fixed2">0</span>
<button class="qty" onclick="changeQty('fixed2', 1)">+</button>
<span style="margin-left: 8px;">U</span>
</div>
</div>
</div>
<div class="task" id="consommable-fixed-3">
<div class="task-header">
<strong>Colle Bois</strong>
</div>
<div class="controls">
<div class="quantity">
<button class="qty" onclick="changeQty('fixed3', -1)">‚Äì</button>
<span id="qty-fixed3">0</span>
<button class="qty" onclick="changeQty('fixed3', 1)">+</button>
<span style="margin-left: 8px;">mL</span>
</div>
</div>
</div>
<div class="task" id="consommable-fixed-4">
<div class="task-header">
<strong>Cheville plastique</strong>
</div>
<div class="controls">
<div class="quantity">
<button class="qty" onclick="changeQty('fixed4', -1)">‚Äì</button>
<span id="qty-fixed4">0</span>
<button class="qty" onclick="changeQty('fixed4', 1)">+</button>
<span style="margin-left: 8px;">U</span>
</div>
</div>
</div>
</div><br/><button onclick="addConsommableCard()" style="margin: 12px 0;padding: 8px 16px;background-color: #ff6c0a;color: white;border: none;border-radius: 6px;font-size: 1rem;cursor: pointer;">+ Ajouter un consommable</button></div><div class="section" style="text-align:center;"><button id="btn-finaliser" onclick="confirmFinalisation()" style="padding: 14px 28px; font-size: 1.1rem; font-weight: bold;">‚úÖ Finaliser l‚Äôintervention</button><button id="btn-unlock" onclick="unlockForm()" style="margin-left: 10px; padding: 14px 28px; font-size: 1.1rem; font-weight: bold;">üîì Modifier de nouveau</button></div></div><script>
// Chrono g√©n√©ral
let globalRunning = false;
let globalSeconds = 0;
let globalInterval = null;

function toggleGlobalTimer() {
  const timer = document.getElementById("global-timer");
  const btn = document.getElementById("global-btn");

  if (!globalRunning) {
    globalInterval = setInterval(() => {
      globalSeconds++;
      let mins = Math.floor(globalSeconds / 60);
      let secs = globalSeconds % 60;
      timer.innerText = `${mins}m ${secs}s`;
    }, 1000);
    globalRunning = true;
    btn.innerText = "Pause";
  } else {
    clearInterval(globalInterval);
    globalRunning = false;
    btn.innerText = "Reprendre";
  }
}

function resetGlobalTimer() {
  clearInterval(globalInterval);
  globalRunning = false;
  globalSeconds = 0;
  document.getElementById("global-timer").innerText = "0m 0s";
  document.getElementById("global-btn").innerText = "D√©marrer";
}

// Chrono t√¢ches
function startTimer(id) {
  const timer = document.getElementById("timer-" + id);
  const btn = document.getElementById("btn-" + id);
  if (!timer.dataset.seconds) timer.dataset.seconds = 0;
  if (!timer.dataset.running || timer.dataset.running === "false") {
    timer.dataset.running = "true";
    btn.innerText = "Pause";
    timer.dataset.interval = setInterval(() => {
      timer.dataset.seconds++;
      let mins = Math.floor(timer.dataset.seconds / 60);
      let secs = timer.dataset.seconds % 60;
      timer.innerText = mins + "m " + secs + "s";
    }, 1000);
  } else {
    timer.dataset.running = "false";
    clearInterval(timer.dataset.interval);
    btn.innerText = "Reprendre";
  }
}

// Ajout Quantit√©
function changeQty(id, delta) {
  const qtyElem = document.getElementById("qty-" + id);
  if (!qtyElem) return;

  let currentText = qtyElem.innerText.replace(',', '.');
  let val = parseFloat(currentText);
  if (isNaN(val)) val = 0;

  let step = 1;

  switch (id) {
    case '37':
    case '38':
    case '47':
      step = 0.1;
      break;
    case "fixed1":
    case "fixed2":
      step = 0.25;
      break;
    case "fixed3":
      step = 10;
      break;
    default:
      step = 1;
      break;
  }

  val += delta * step;
  if (val < 0) val = 0;

  const isFloat = !Number.isInteger(step) || step < 1;
  const displayed = isFloat ? val.toFixed(2).replace('.', ',') : Math.round(val);

  qtyElem.innerText = displayed;
}

// Ajout T√¢ches
let manualTaskIndex = 1000;

function addManualTask() {
  const container = document.getElementById("tasks-container"); // √† adapter selon ton conteneur r√©el

  const div = document.createElement("div");
  div.className = "task";
  div.id = `manual-task-${manualTaskIndex}`;

  div.innerHTML = `
    <div class="task-header">
      <input type="text" placeholder="Nom de la t√¢che" style="flex:1; padding: 5px;" />
      <div id="timer-m${manualTaskIndex}">0m 0s</div>
      <button onclick="removeManualTask(${manualTaskIndex})" style="margin-left: 10px;">üóëÔ∏è</button>
    </div>
    <div class="controls">
      <button onclick="startTimer('m${manualTaskIndex}')" id="btn-m${manualTaskIndex}">D√©marrer</button>
      <div class="quantity">
        <button onclick="changeQty('m${manualTaskIndex}', -1)">‚Äì</button>
        <span id="qty-m${manualTaskIndex}">0</span>
        <button onclick="changeQty('m${manualTaskIndex}', 1)">+</button>
      </div>
    </div>
  `;

  container.appendChild(div);
  manualTaskIndex++;
}

function removeManualTask(index) {
  const elem = document.getElementById(`manual-task-${index}`);
  if (elem) elem.remove();
}



// Ajout Consommable
let consommableIndex = 100; // pour ne pas m√©langer avec fixed1, fixed2...

function addConsommableCard() {
  const container = document.getElementById("consommables-container");

  const div = document.createElement("div");
  div.className = "task";
  div.id = `consommable-${consommableIndex}`;

  div.innerHTML = `
    <div class="task-header">
      <input type="text" placeholder="Nom du consommable" style="flex:1; padding: 5px;" />
      <button onclick="removeConsommable(${consommableIndex})" style="margin-left: 10px;">üóëÔ∏è</button>
    </div>
    <div class="controls">
      <div class="quantity">
        <button onclick="changeQty('c${consommableIndex}', -1)">‚Äì</button>
        <span id="qty-c${consommableIndex}">0</span>
        <button onclick="changeQty('c${consommableIndex}', 1)">+</button>
        <span style="margin-left: 8px;">U</span>
      </div>
    </div>
  `;

  container.appendChild(div);
  consommableIndex++;
}

function removeConsommable(index) {
  const elem = document.getElementById(`consommable-${index}`);
  if (elem) elem.remove();
}



document.addEventListener("DOMContentLoaded", function() {
  const date = new Date();
  const formatted = date.toLocaleDateString("fr-FR", {
    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
  });
  document.getElementById("intervention-date").innerText = formatted;
});

function confirmFinalisation() {
  if (confirm("Souhaitez-vous vraiment finaliser cette intervention ?\nLes donn√©es seront consid√©r√©es comme valid√©es.")) {
    alert("Intervention finalis√©e avec succ√®s !");
  }
}

function lockForm() {
  // Rendre tous les inputs en lecture seule
  document.querySelectorAll("input[type='text']").forEach(input => input.setAttribute("readonly", true));

  // D√©sactiver tous les boutons sauf "Finaliser"
  document.querySelectorAll("button").forEach(btn => {
    if (btn.id !== "btn-finaliser" && btn.id !== "btn-unlock") {
      btn.disabled = true;
      btn.style.opacity = 0.5;
      btn.style.cursor = "not-allowed";
    }
  });

  // Indiquer que le formulaire est verrouill√©
  const confirmationNote = document.createElement("p");
  confirmationNote.innerText = "üîí Fiche verrouill√©e. Aucune modification possible.";
  confirmationNote.style.color = "#F5A623";
  confirmationNote.style.fontWeight = "bold";
  confirmationNote.style.textAlign = "center";
  document.body.appendChild(confirmationNote);
}

function confirmFinalisation() {
  if (confirm("Souhaitez-vous vraiment finaliser cette intervention ?\nLes donn√©es seront consid√©r√©es comme valid√©es.")) {
    alert("Intervention finalis√©e avec succ√®s !");
    lockForm();
  }
}

function unlockForm() {
  // R√©activer les champs texte
  document.querySelectorAll("input[type='text']").forEach(input => input.removeAttribute("readonly"));

  // R√©activer les boutons sauf ceux d√©j√† li√©s √† verrouillage
  document.querySelectorAll("button").forEach(btn => {
    if (btn.id !== "btn-finaliser" && btn.id !== "btn-unlock") {
      btn.disabled = false;
      btn.style.opacity = 1;
      btn.style.cursor = "pointer";
    }
  });

  // Retirer le message de verrouillage s‚Äôil existe
  const existingNote = document.querySelector("p[style*='F5A623']");
  if (existingNote) existingNote.remove();
}

function unlockForm() {
  // R√©activer les champs texte
  document.querySelectorAll("input[type='text']").forEach(input => input.removeAttribute("readonly"));

  // R√©activer les boutons sauf Finaliser
  document.querySelectorAll("button").forEach(btn => {
    if (btn.id !== "btn-finaliser" && btn.id !== "btn-unlock") {
      btn.disabled = false;
      btn.style.opacity = 1;
      btn.style.cursor = "pointer";
    }
  });

  // Retirer le message de verrouillage s‚Äôil existe
  const lockMessage = document.getElementById("lock-message");
  if (lockMessage) lockMessage.remove();
}



document.addEventListener("DOMContentLoaded", function () {
  const poseInput = document.querySelector('input[name="pose"]');
  const preview = document.getElementById('preview-filename');

  function updatePreviewFilename() {
    const nomPose = poseInput.value.trim().replaceAll(' ', '_') || "intervention";
    const now = new Date();
    const dateStr = now.toISOString().split('T')[0];
    const timeStr = now.getHours().toString().padStart(2, '0') + 'h' + now.getMinutes().toString().padStart(2, '0');
    const finalFilename = `${dateStr}_${timeStr}_Pose_${nomPose}.pdf`;
    if (preview) preview.textContent = "üìé Fichier g√©n√©r√© : " + finalFilename;
  }

  if (poseInput && preview) {
    poseInput.addEventListener("input", updatePreviewFilename);
    updatePreviewFilename();
  }
});
</script><button id="export-txt-button" onclick="exportTXTToDropbox()" style="margin-right: 10px; background-color: #f1c40f; color: black; padding: 10px 20px; border: none; border-radius: 6px; font-weight: bold;">üìÑ Export TXT vers Dropbox</button>
<script>
function exportTXTToDropbox() {
  const now = new Date();
  const date = now.toLocaleDateString('fr-CA');
  const time = now.toTimeString().split(' ')[0].replace(/:/g, '-');

  const pose = document.getElementById("nomPose")?.value || "SansNom";
  const poseur = document.getElementById("poseur-name")?.value || "PoseurInconnu";
  const chrono = document.getElementById("global-timer")?.innerText || "0m 0s";

  let txt = `Date : ${date} ${time}
Nom de la pose : ${pose}
Poseur : ${poseur}
Temps total : ${chrono}
\n`;

  txt += "--- T√¢ches ---\n";
  document.querySelectorAll(".task").forEach(task => {
    if (task.closest("#consommables-container")) return; // Ne pas inclure les consommables ici
    const titre = task.querySelector("strong")?.innerText
              || task.querySelector("input[type='text']")?.value
              || "";
    const timer = task.querySelector("div[id^='timer-']")?.innerText || "";
    const qtyEl = task.querySelector(".quantity span[id^='qty-']");
    const qty = qtyEl?.innerText;

    if (titre && qty !== undefined) {
      txt += `${titre} x${qty} (${timer})\n`;
    } else if (titre) {
      txt += `${titre} (${timer})\n`;
    }
  });

  let consommableSection = "";

  document.querySelectorAll("#consommables-container .task").forEach(cons => {
    const label =
      cons.querySelector("input[type='text']")?.value ||
      cons.querySelector("strong")?.innerText ||
      "";
    const qty = cons.querySelector("span[id^='qty-']")?.innerText || "0";
    if (label) consommableSection += `${label} x${qty}\n`;
  });

  if (consommableSection) {
    txt += "\n--- Consommables ---\n" + consommableSection;
  }


  fetch("https://script.google.com/macros/s/AKfycbz13lpc06-GTHdJD7ktpXEIf3QssSc_bLCyNXCVVfIuB1Oa8j4l1GEGT1b_Aossb3qi/exec", {
    method: "POST",
    headers: { "Content-Type": "text/plain;charset=utf-8" },
    body: txt
  })
  .then(res => res.text())
  .then(txt => alert(txt))
  .catch(err => alert("‚ùå Erreur TXT Dropbox : " + err.message));
}
</script>
</body>
</html
